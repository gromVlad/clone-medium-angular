import{a as X,d as tt,e as it,h as nt}from"./chunk-2MMKAX67.js";import{a as Y,b as Z,c as et}from"./chunk-IRSJWLOQ.js";import{j as H,l as J,m as I,p as k}from"./chunk-AJNMQDW7.js";import{$a as p,Ba as B,Ga as R,Ja as o,Sb as S,Tb as O,Ub as b,Vb as Q,Wb as G,Xa as f,Xb as _,Za as a,a as q,ab as l,ba as d,bb as P,ca as C,fb as D,gb as x,ja as A,lb as c,mb as F,nb as M,ob as T,oc as L,pc as E,qb as y,rc as N,sb as u,sc as K,ta as g,tb as V,ub as h,vb as v,wb as W}from"./chunk-MAJDB3HN.js";var z=K("feed"),rt=N(z,t=>t.isLoading),ot=N(z,t=>t.error),at=N(z,t=>t.data);var U=(()=>{let e=class e{range(n,r){return[...Array(r).keys()].map(s=>s+n)}parseUrl(n){let[r,s]=n.split("?"),m={};return s&&s.split("&").forEach(dt=>{let[mt,gt]=dt.split("=");m[mt]=gt}),{url:r,query:m}}stringifyParams(n){return Object.keys(n).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(n[s])}`).join("&")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ht=t=>({active:t}),w=t=>[t],j=t=>({page:t});function Pt(t,e){if(t&1&&(p(0,"li",2)(1,"a",3),c(2),l()()),t&2){let i=e.$implicit,n=x(2);a("ngClass",u(4,ht,n.currentPageProps===i)),o(),a("routerLink",u(6,w,n.urlProps))("queryParams",u(8,j,i)),o(),M(" ",i," ")}}var st=t=>({disabled:t});function vt(t,e){if(t&1&&(p(0,"ul",1)(1,"li",2)(2,"a",3),c(3," \xAB Prev "),l()(),f(4,Pt,3,10,"li",4),p(5,"li",2)(6,"a",3),c(7," Next \xBB "),l()()()),t&2){let i=x();o(),a("ngClass",u(7,st,i.currentPageProps===1)),o(),a("routerLink",u(9,w,i.urlProps))("queryParams",u(11,j,i.currentPageProps-1)),o(2),a("ngForOf",i.pages),o(),a("ngClass",u(13,st,i.currentPageProps===i.pagesCount)),o(),a("routerLink",u(15,w,i.urlProps))("queryParams",u(17,j,i.currentPageProps+1))}}var lt=(()=>{let e=class e{constructor(){this.utilsService=g(U)}ngOnInit(){this.pagesCount=Math.ceil(this.totalProps/this.limitProps);let n=this.utilsService.range(1,this.pagesCount);this.pages=n.slice(this.currentPageProps>4?this.currentPageProps-3:0,this.currentPageProps>4?this.currentPageProps+3:6)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=C({type:e,selectors:[["app-pagination"]],inputs:{totalProps:[d.None,"total","totalProps"],limitProps:[d.None,"limit","limitProps"],currentPageProps:[d.None,"currentPage","currentPageProps"],urlProps:[d.None,"url","urlProps"]},standalone:!0,features:[y],decls:1,vars:1,consts:[["class","pagination",4,"ngIf"],[1,"pagination"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"routerLink","queryParams"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"]],template:function(r,s){r&1&&f(0,vt,8,19,"ul",0),r&2&&a("ngIf",s.pages.length>1)},dependencies:[_,S,O,b,k,I],styles:[".pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;list-style-type:none;padding:0;font-size:15px}.page-item[_ngcontent-%COMP%]{display:inline-block;margin-right:10px}.page-item[_ngcontent-%COMP%]:last-child{margin-right:0 5px}.page-link[_ngcontent-%COMP%]{display:inline-block;padding:5px 10px;border:1px solid #ccc;border-radius:5px;text-decoration:none;color:#333;font-size:17px}.page-link[_ngcontent-%COMP%]:hover{background-color:#dfd8d8}.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#333;color:#fff}.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#ccc}"]});let t=e;return t})();var Ct=(t,e)=>({btn:!0,"btn-sm":!0,"btn-primary":t,"btn-outline-primary":e}),ct=(()=>{let e=class e{constructor(){this.store=g(L)}ngOnInit(){this.favoritesCount=this.favoritesCountProps,this.isFavorited=this.isFavoritedProps}handleLike(){this.store.dispatch(nt({isFavorited:this.isFavorited,slug:this.articleSlugProps})),this.isFavorited?this.favoritesCount=this.favoritesCount-1:this.favoritesCount=this.favoritesCount+1,this.isFavorited=!this.isFavorited}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=C({type:e,selectors:[["app-add-to-favorites"]],inputs:{isFavoritedProps:[d.None,"isFavorited","isFavoritedProps"],favoritesCountProps:[d.None,"favoritesCount","favoritesCountProps"],articleSlugProps:[d.None,"articleSlug","articleSlugProps"]},standalone:!0,features:[y],decls:5,vars:5,consts:[[3,"ngClass","click"],[1,"img"],["src","assets/favorite.svg"]],template:function(r,s){r&1&&(p(0,"button",0),D("click",function(){return s.handleLike()}),p(1,"div",1),P(2,"img",2),l(),p(3,"p"),c(4),l()()),r&2&&(a("ngClass",V(2,Ct,s.isFavorited,!s.isFavorited)),o(4),F(s.favoritesCount))},dependencies:[_,S],styles:[".btn-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.btn[_ngcontent-%COMP%]{padding:10px 15px;border-radius:5px;border:1px solid #ccc;cursor:pointer;margin:0 5px}.btn-sm[_ngcontent-%COMP%]{padding:5px 10px;font-size:12px}.btn-primary[_ngcontent-%COMP%]{background-color:#333;color:#fff}.btn-outline-primary[_ngcontent-%COMP%]{background-color:#8a8484;color:#fff}.img[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;margin-right:5px}.img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}"]});let t=e;return t})();function xt(t,e){t&1&&(p(0,"app-loading",3),c(1,"Loading..."),l())}function yt(t,e){t&1&&(p(0,"app-error-message",4),c(1,"Some error happened..."),l())}function _t(t,e){t&1&&(p(0,"div")(1,"p",5),c(2,"No articles are here... yet."),l()())}var ut=t=>["/profiles",t],Ft=t=>["/articles",t];function Mt(t,e){if(t&1&&(p(0,"div",8)(1,"div",9)(2,"a",10),P(3,"img",11),l(),p(4,"div",12)(5,"a",13),c(6),l(),p(7,"span",14),c(8),h(9,"date"),l()(),p(10,"div",15),P(11,"app-add-to-favorites",16),l()(),p(12,"div",17)(13,"h1"),c(14),l(),p(15,"p"),c(16),l(),p(17,"a",18),c(18,"Read more.."),l(),P(19,"app-tag-list",19),l()()),t&2){let i=e.$implicit,n=x(2);o(2),a("routerLink",u(17,ut,i.author.username)),o(),a("src",i.author.image,R),o(2),a("routerLink",u(19,ut,i.author.username)),o(),M(" ",i.author.username," "),o(2),F(W(9,14,i.createdAt,"MMM d, yyyy")),o(3),a("isFavorited",i.favorited)("articleSlug",i.slug)("favoritesCount",i.favoritesCount),o(3),T(" ",i.title.slice(0,120),"",i.title.length>120?n.wordMaxLenght:""," "),o(2),T("",i.description.slice(0,300)," ",i.description.length>300?n.wordMaxLenght:"",""),o(),a("routerLink",u(21,Ft,i.slug)),o(2),a("tags",i.tagList)}}function St(t,e){if(t&1&&(p(0,"div"),f(1,Mt,20,23,"div",6),h(2,"async"),P(3,"app-pagination",7),h(4,"async"),l()),t&2){let i=x(),n,r;o(),a("ngForOf",(n=v(2,5,i.feed$))==null?null:n.articles),o(2),a("total",((r=v(4,7,i.feed$))==null?null:r.articlesCount)||1)("limit",i.limit)("url",i.baseUrl)("currentPage",i.currentPage)}}var ne=(()=>{let e=class e{constructor(){this.store=g(L),this.router=g(J),this.route=g(H),this.utilsService=g(U),this.limit=tt.limit,this.wordMaxLenght="..."}ngOnInit(){this.initializeValues(),this.initializeListeners()}ngOnChanges(n){!n.apiUrlProps.firstChange&&n.apiUrlProps.currentValue!==n.apiUrlProps.previousValue&&this.fetchFeed()}initializeValues(){this.feed$=this.store.pipe(E(at)),this.error$=this.store.pipe(E(ot)),this.isLoading$=this.store.pipe(E(rt)),this.baseUrl=this.router.url.split("?")[0]}initializeListeners(){this.queryParamsSubscription=this.route.queryParams.subscribe(n=>{this.currentPage=Number(n.page||"1"),this.fetchFeed()})}fetchFeed(){let n=this.currentPage*this.limit-this.limit,r=this.utilsService.parseUrl(this.apiUrlProps),s=this.utilsService.stringifyParams(q({limit:this.limit,offset:n},r.query)),m=`${r.url}?${s}`;this.store.dispatch(X({url:m})),this.store.dispatch(it())}ngOnDestroy(){this.queryParamsSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=C({type:e,selectors:[["app-feed"]],inputs:{apiUrlProps:[d.None,"apiUrl","apiUrlProps"]},standalone:!0,features:[B,y],decls:8,vars:12,consts:[["class","loading",4,"ngIf"],["class","error",4,"ngIf"],[4,"ngIf"],[1,"loading"],[1,"error"],[1,"no-articles"],["class","article-container",4,"ngFor","ngForOf"],[3,"total","limit","url","currentPage"],[1,"article-container"],[1,"author-container"],[3,"routerLink"],[3,"src"],[1,"author-info"],[1,"author",3,"routerLink"],[1,"created-at"],[1,"add-favorites"],[3,"isFavorited","articleSlug","favoritesCount"],[1,"article-link"],[1,"read-more",3,"routerLink"],[3,"tags"]],template:function(r,s){if(r&1&&(f(0,xt,2,0,"app-loading",0),h(1,"async"),f(2,yt,2,0,"app-error-message",1),h(3,"async"),f(4,_t,3,0,"div",2),h(5,"async"),f(6,St,5,9,"div",2),h(7,"async")),r&2){let m;a("ngIf",v(1,4,s.isLoading$)),o(2),a("ngIf",v(3,6,s.error$)),o(2),a("ngIf",((m=v(5,8,s.feed$))==null||m.articles==null?null:m.articles.length)===0),o(2),a("ngIf",v(7,10,s.feed$))}},dependencies:[_,O,b,Q,G,k,I,Y,Z,lt,et,ct],styles:[".article-container[_ngcontent-%COMP%]{margin:20px;padding:10px;background-color:#f5f5f5;border-radius:5px}.author-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.author-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;margin-right:10px}.author-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.author[_ngcontent-%COMP%]{font-weight:700;color:#333;font-size:20px;text-decoration:none;margin-bottom:5px}.created-at[_ngcontent-%COMP%]{color:#777;font-size:15px}.add-favorites[_ngcontent-%COMP%]{margin-left:auto;color:#777;cursor:pointer}.article-link[_ngcontent-%COMP%]{text-decoration:none;color:#333;font-size:17px}h1[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:10px}.no-articles[_ngcontent-%COMP%]{font-size:20px}p[_ngcontent-%COMP%]{margin-bottom:10px}.read-more[_ngcontent-%COMP%]{color:#777;font-size:14px;text-decoration:underline;cursor:pointer;font-size:17px}.pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.app-tag-list[_ngcontent-%COMP%]{margin-top:5px}"]});let t=e;return t})();export{ne as a};
